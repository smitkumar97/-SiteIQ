<div class="dashboard-container">
  <mat-card class="analyze-card">
    <mat-card-content>
      <form [formGroup]="reportForm">
        <app-input
          label="Enter Website URL"
          placeholder="https://example.com"
          formControlName="website"
          [required]="true"
          errorMessage="Please provide the link"></app-input>
      </form>
      <button class="analyze-btn" (click)="generateReport()"
        [disabled]="loading">
        Analyze
      </button>
    </mat-card-content>
  </mat-card>

  <mat-card *ngIf="reportData" class="report-card">
    <mat-card-title>Analysis Report</mat-card-title>
    <mat-card-content>
      <div class="score-container">
        <p><strong>Performance:</strong> {{ reportData.performanceScore }}%</p>
        <p><strong>SEO:</strong> {{ reportData.seoScore }}%</p>
        <p><strong>Accessibility:</strong> {{ reportData.accessibilityScore
          }}%</p>
        <p><strong>Best Practices:</strong> {{ reportData.bestPracticesScore
          }}%</p>
      </div>
      <h3>AI Recommendations</h3>
      <p class="ai-recommendations">{{ reportData.aiRecommendations }}</p>
    </mat-card-content>
  </mat-card>

  <mat-card class="history-card">
    <mat-card-title>Report History</mat-card-title>
    <mat-card-content>
      <div class="table-wrapper">
        <table
          *ngIf="history && history.length"
          class="table table-container"
          cellspacing="0"
          cellpadding="0">
          <thead class="table-head">
            <tr class="header-row">
              <th>No</th>
              <th>URL</th>
              <th>Performance</th>
              <th>Date</th>
            </tr>
          </thead>
          <tbody class="table-body">
            <tr class="body-row" *ngFor="let item of history; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ item.url }}</td>
              <td>{{ item.performanceScore }}</td>
              <td>{{ item.createdAt | date: 'short' }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </mat-card-content>
  </mat-card>

</div>

<app-loader [isLoading]="loading" loadingText></app-loader>
